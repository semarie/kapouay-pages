<!doctype html><html lang=en><head><meta charset=utf-8><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Using the most unhinged AVX-512 instruction to make the fastest phrase search algo - kapouay.eu.org</title><link href=/style.css rel=stylesheet><link href=/favicon.ico rel=icon><link href=/atom.xml rel=alternate type=application/atom+xml><link href=https://maly.io/@semarie rel=me><meta content=article property=og:type><meta content="Using the most unhinged AVX-512 instruction to make the fastest phrase search algo" property=og:title><body><nav class=site><ul><li><a href=/>About</a><li><a href=/notes/>Notes</a><li><a href=/bookmarks/>Bookmarks</a><li><a href=/tags>Tags</a></ul></nav><article><header><h1>Using the most unhinged AVX-512 instruction to make the fastest phrase search algo</h1><ul class=properties><li>Added on 2025-03-16<li>Page: <a href=https://gab-menezes.github.io/2025/01/13/using-the-most-unhinged-avx-512-instruction-to-make-the-fastest-phrase-search-algo.html>https://gab-menezes.github.io/2025/01/13/using-the-most-unhinged-avx-512-instruction-to-make-the-fastest-phrase-search-algo.html</a><li>See on <a href=https://web.archive.org/web/20250316190915/https://gab-menezes.github.io/2025/01/13/using-the-most-unhinged-avx-512-instruction-to-make-the-fastest-phrase-search-algo.html>Internet Archive</a><li><a href=/tags/asm/>#asm</a></ul></header><section><p>Disclaimers before we start For those who don’t want to read/don’t care that much, here are the results. I hope after seeing them you are compelled to read. TL;DR: I wrote a super fast phrase search algorithm using AVX-512 and achieved wins up to 1600x the performance of Meilisearch. The source code can be found here, and here is the crate. The contents of this blog post are inspired by the wonderful idea of Doug Turnbull from the series of blog posts about Roaringish. Here we will take these ideas to an extreme, from smart algorithms to raw performance optimization. I highly recommend reading the Roaringish blog post, but if you don’t want to, there will be a recap on how it works. This project has been almost 7 months in the making, with thousands and thousands of lines of code written and rewritten, so bear with me if I sound crazy. At the moment of writing, there are almost 2.7k LOC, but I have committed around 17k LOC (let’s take a few thousand because of .lock files) (probably at the time of publishing this number has increased), so the project has been rewritten almost 6 times.</section><footer></footer></article>